Added `needs_capability` to `EntityContext` so context member function can require capabilities.
